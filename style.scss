@import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@500&family=Luckiest+Guy&display=swap');

$dark-blue: #172b47;
$yellow: #ffb527;
$light-grey: #e9eaed;
$grey: #757679e5;

%style1 {
  background-color: $dark-blue;
  color: $yellow;
}

%style2 {
  background-color: $yellow;
  color: $dark-blue;
}

%style3 {
  background-color: $dark-blue;
  color: $light-grey;
}

@mixin grid {
  display: grid;
  justify-content: center;
  align-content: center;
  justify-items: center;
  align-items: center;
}

*,
*::after,
*::before {
  box-sizing: border-box;
}

:root {
  --cell-size: 100px;
  --mark-size: calc(var(--cell-size) * 0.9);
}

body {
  display: flex;
  flex-flow: column;
  justify-content: space-between;
  align-items: center;
  text-align: center;
  background-color: $dark-blue;
  font-family: 'Comfortaa', cursive;
  margin: auto;
  height: 100vh;
}

header {
  height: 20vh;
  width: 100%;
}
header h1 {
  @extend %style1;
  font-family: 'Luckiest Guy', cursive;
  font-size: 4em;
  border: solid 3px $light-grey;
  border-radius: 20px;
  margin: 0.5rem 0.5rem;
}

h2 {
  color: $light-grey;
  margin-top: 4rem;
}

footer {
  @extend %style2;
  width: 100vw;
  text-align: center;
  font-size: 1.3rem;
  font-weight: 600;
  padding: 0.5rem 0;
}

footer p {
  margin: 0.5rem 0;
}

footer a {
  color: $dark-blue;
}

.cup {
  width: 10vw;
  min-width: 80px;
  height: auto;
  border: solid 3px $yellow;
  border-radius: 40%;
  margin: 1rem 0;
}

.scoresTable {
  @include grid;
  grid-template: repeat(2, 100px) / repeat(3, 100px);
  border: outset 4px $yellow;
  border-radius: 20px;
  margin: 0.5rem 0;
}

/* --------------- DEFINE THE GRID'S GAME AREA --------------- */
.board {
  width: 100vw;
  height: 55vh;
  @include grid;
  grid-template-columns: repeat(3, auto);
}

.cell {
  width: var(--cell-size);
  height: var(--cell-size);
  border: 2px solid $yellow;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  cursor: pointer;
}

/* --------------- REMOVE GRID'S BORDERS --------------- */
/* Remove the top border of my grid */
.cell:first-child,
.cell:nth-child(2),
.cell:nth-child(3) {
  border-top: none;
}

/* Remove the left border of my grid */
.cell:nth-child(3n + 1) {
  border-left: none;
}

/* Remove the right border of my grid */
.cell:nth-child(3n + 3) {
  border-right: none;
}

/* Remove the bottom border of my grid */
.cell:last-child,
.cell:nth-child(8),
.cell:nth-child(7) {
  border-bottom: none;
}

/* Indicate cells that can't be marked */
.cell.x,
.cell.circle {
  cursor: not-allowed;
}

/* --------------- DEFINE MARK'S COLORS--------------- */
.cell.x::before,
.cell.x::after {
  background-color: $light-grey;
}

.cell.circle::before,
.cell.circle::after {
  background-color: $yellow;
}

/* --------------- SHOW SHADOWS ON HOVER --------------- */
.board.x .cell:not(.x):not(.circle):hover::before,
.board.x .cell:not(.x):not(.circle):hover::after,
.board.circle .cell:not(.x):not(.circle):hover::before,
.board.circle .cell:not(.x):not(.circle):hover::after {
  background-color: $grey;
}

/* --------------- CREATE X-MARK & X'S SHADOW MARK--------------- */
.cell.x::before,
.cell.x::after,
.board.x .cell:not(.x):not(.circle):hover::before, /* Interdit le shadow au survol sur des cases déjà marquées */
.board.x .cell:not(.x):not(.circle):hover::after {
  content: '';
  position: absolute; /* Aligne correctement les deux barres du X */
  width: calc(var(--mark-size) * 0.2);
  height: var(--mark-size);
  border-radius: 20px;
}

.cell.x::before,
.board.x .cell:not(.x):not(.circle):hover::before {
  transform: rotate(45deg);
}

.cell.x::after,
.board.x .cell:not(.x):not(.circle):hover::after {
  transform: rotate(-45deg);
}

/* --------------- CREATE CIRCLE-MARK & CIRCLE'S SHADOW MARK--------------- */
.cell.circle::before,
.cell.circle::after,
.board.circle .cell:not(.x):not(.circle):hover::before,
.board.circle .cell:not(.x):not(.circle):hover::after {
  content: '';
  position: absolute; /* Aligne correctement l'anneau et le cercle du circle-mark */
  border-radius: 50%;
}

/* Define the circle-mark */
.cell.circle::before,
.board.circle .cell:not(.x):not(.circle):hover::before {
  width: calc(var(--mark-size) * 0.9);
  height: calc(var(--mark-size) * 0.9);
}

/* Define the white disc onto the center of the circle-mark */
.cell.circle::after,
.board.circle .cell:not(.x):not(.circle):hover::after {
  width: calc(var(--mark-size) * 0.55);
  height: calc(var(--mark-size) * 0.55);
  background-color: $dark-blue;
}

/* --------------- DEFINE THE WINNING MESSAGE --------------- */
.winning-message {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #172b47ee;
}

.winning-message .message {
  @extend %style2;
  width: 100vw;
  padding: 1rem 0;
}

#go,
#goToGame,
.winning-message button {
  @extend %style2;
  font-family: 'Comfortaa', cursive;
  font-size: 2.5rem;
  border: outset 2px $light-grey;
  border-radius: 20px;
  box-shadow: inset 0px 0px 8px $light-grey;
  width: 70%;
  margin-top: 2rem;
  padding: 0.25em 0.25em;
  cursor: pointer;
}

.winning-message button:hover {
  @extend %style1;
  border-color: $light-grey;
}

.winning-message.show {
  display: flex;
  flex-direction: column;
  justify-content: space-evenly;
  align-items: center;
  padding: 0.5rem 0.5rem;
  font-size: 4rem;
  color: $light-grey;
  border: solid 2px $light-grey;
}

.winning-message button img {
  width: 40px;
  height: auto;
  position: relative;
  top: 4px;
  right: 8px;
}

/* --------------- DEFINE CREDITS.HTML SECTION --------------- */

.credits section nav ul {
  display: flex;
  flex-flow: column wrap;
  margin: 1rem 1rem;
  padding: 0;
}

.credits section nav li,
.credits section nav a {
  list-style-type: none;
  text-decoration: none;
  font-size: 1.5rem;
  line-height: 3rem;
  color: $light-grey;
}

/* --------------- DEFINE GAME RULES SECTION --------------- */

#rules {
  visibility: hidden;
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  text-align: center;
  z-index: 1000;
  background-color: #172b47ee;
}
#rules div {
  width: 390px;
  height: fit-content;
  margin: 100px auto;
  background-color: $yellow;
  border-radius: 10px;
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  padding: 15px;
  text-align: center;
  font-weight: bold;
  font-size: 1.1rem;
  position: absolute;
  left: 50%;
  top: 300px;
  transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%);
  -webkit-transform: translate(-50%, -50%);
}

#rules div h3 {
  font-size: 2rem;
}

#go,
#goToGame {
  background-color: $dark-blue;
  color: $yellow;
  font-size: 1.5rem;
  border-radius: 15px;
  border: none;
  box-shadow: inset -2px -1px 8px #e9eaed;
  width: fit-content;
  margin-top: 0.8rem;
  padding: 0.25em 0.8em;
  cursor: pointer;
  &:hover {
    @extend %style3;
  }
}

#go img {
  width: 40px;
  height: auto;
  position: relative;
  top: 4px;
  right: 8px;
}

#go span {
  position: relative;
  bottom: 8px;
}
/* TODO - Ajouter les medias-queries */
/* TODO - Factoriser le code CSS */
